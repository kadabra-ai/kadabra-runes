# cargo-release configuration for kadabra-runes

allow-branch = ["main"]
sign-commit = false
sign-tag = false
push-remote = "origin"
pre-release-commit-message = "Release {{version}}"
tag-message = "Release {{version}}"
tag-prefix = "v"
tag-name = "v{{version}}"
publish = true
push = true
shared-version = true

# Update CHANGELOG.md: Replace [Unreleased] with version and date
pre-release-replacements = [
  {
    file = "CHANGELOG.md",
    search = "## \\[Unreleased\\]",
    replace = "## [Unreleased]\n\n### Added\n\n### Changed\n\n### Deprecated\n\n### Removed\n\n### Fixed\n\n### Security\n\n## [{{version}}] - {{date}}",
  },
  {
    file = "CHANGELOG.md",
    search = "\\[Unreleased\\]: https://github.com/kadabra-ai/kadabra-runes/compare/v([0-9.]+)...HEAD",
    replace = "[Unreleased]: https://github.com/kadabra-ai/kadabra-runes/compare/v{{version}}...HEAD\n[{{version}}]: https://github.com/kadabra-ai/kadabra-runes/compare/v$1...v{{version}}",
  },
]

consolidate-commits = true
